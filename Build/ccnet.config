  <project name="ccimetadata" xmlns:cb="urn:ccnet.config.builder">
    <workingDirectory>$(workingDirectory)\ccimetadata</workingDirectory>
    <artifactDirectory>$(artifactDirectory)\ccimetadata</artifactDirectory>

    <!-- build constants -->
    <cb:define majorVersion="1"/>
    <cb:define minorVersion="0"/>
    <cb:define svnUrl="https://ccimetadata.svn.codeplex.com/svn" />
    <cb:define svnDirectory="$(svnRoot)\ccimetadata" />

    <!-- build definition -->
    <triggers>
      <intervalTrigger />
    </triggers>

    <labeller type="dateLabeller" />

    <sourcecontrol type="svn">
      <trunkUrl>$(svnUrl)</trunkUrl>
      <workingDirectory>$(svnDirectory)</workingDirectory>
    </sourcecontrol>
    
    <tasks>
      <msbuild>
        <executable>$(msbuild)</executable>
        <workingDirectory>$(workingDirectory)\build</workingDirectory>
        <projectFile>ccimetadata.build</projectFile>
        <targets>ContinuousBuild</targets>
        <buildArgs>/noconsolelogger</buildArgs>
        <timeout>1800</timeout>
        <logger>$(msbuildLogger)</logger>
      </msbuild>
      <!-- create release on codeplex -->
      <msbuild>
        <executable>$(msbuild)</executable>
        <workingDirectory>$(workingDirectory)\build</workingDirectory>
        <projectFile>ccimetadata.build</projectFile>
        <targets>ContinuousCodePlexRelease</targets>
        <buildArgs>/noconsolelogger</buildArgs>
        <timeout>1800</timeout>
        <logger>$(msbuildLogger)</logger>
      </msbuild>      
    </tasks>

    <publishers>
      <merge>
        <files>   
          <file>$(workingDirectory)\ccimetadata\bin\*.results.xml</file>
        </files>
      </merge>
      <statistics />
      <xmllogger />
      <!-- clean up old drops -->
      <artifactcleanup cleanUpMethod="KeepLastXBuilds" cleanUpValue="10" />
      <!-- labelled build -->
      <buildpublisher>
        <alwaysPublish>true</alwaysPublish>
      </buildpublisher>
      <!--
      <mail
        from="fseplmbu@microsoft.com"
        mailhost="smtphost"
        includeDetails="true">
        <users>
          <user name="CCI.Metadata Build Notifications" group="buildmaster" address="pexbuild@microsoft.com"/>
        </users>
        <groups>
          <group name="developers" notification="change"/>
          <group name="buildmaster" notification="always"/>
        </groups>
      </mail>
      -->
    </publishers>
  </project>
