  <project name="ccimetadata" xmlns:cb="urn:ccnet.config.builder">
    <workingDirectory>$(workingDirectory)</workingDirectory>
    <artifactDirectory>$(artifactDirectory)ccimetadata</artifactDirectory>

    <!-- server constants
    msbuild: path of msbuild.exe
    msbuildLogger: path of the dll providing the msbuild logger
    <cb:define msbuild="$(SystemRoot)\Microsoft.Net\Framework\v2.0.50727\msbuild.exe" />
    <cb:define msbuildLogger="$(Program Files)\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MsBuild.dll" />
    -->

    <!-- build constants -->
    <cb:define majorVersion="1"/>
    <cb:define minorVersion="0"/>
    <cb:define svnUrl="https://ccimetadata.svn.codeplex.com/svn" />
    <cb:define svnDirectory="c:\codeplex\ccimetadata" />

    <!-- build definition -->
    <intervalTrigger />

    <labeller type="assemblyVersionLabeller">
      <major>$(majorVersion)</major>
      <minor>$(minorVersion)</minor>
    </labeller>

    <sourcecontrol type="svn">
      <trunkUrl>$(svnUrl)</trunkUrl>
      <workingDirectory>$(svnDirectory)</workingDirectory>
    </sourcecontrol>
    
    <tasks>
      <msbuild>
        <executable>$(msbuild)</executable>
        <workingDirectory>$(workingDirectory)\build</workingDirectory>
        <projectFile>ccimetadata.build</projectFile>
        <targets>ContinuousBuild</targets>
        <buildArgs>/noconsolelogger</buildArgs>
        <timeout>1800</timeout>
        <logger>$(msbuildLogger)</logger>
      </msbuild>
    </tasks>

    <publishers>
      <!--
      <merge>
        <files>
          <file>$(automationDirectory)fxcop.report.xml</file>          
          <file>$(workingDirectory)bin\checkinbvt.trx</file>
          <file>$(workingDirectory)bin\buildbvt.trx</file>     
        </files>
      </merge>
      -->
      <statistics />
      <xmllogger />
      <!-- clean up old drops -->
      <artifactcleanup cleanUpMethod="KeepLastXBuilds" cleanUpValue="10" />
      <!-- labelled build -->
      <buildpublisher>
        <alwaysPublish>true</alwaysPublish>
      </buildpublisher>
      <!--
      <mail
        from="fseplmbu@microsoft.com"
        mailhost="smtphost"
        includeDetails="true">
        <users>
          <user name="CCI.Metadata Build Notifications" group="buildmaster" address="pexbuild@microsoft.com"/>
        </users>
        <groups>
          <group name="developers" notification="change"/>
          <group name="buildmaster" notification="always"/>
        </groups>
      </mail>
      -->
    </publishers>
  </project>
